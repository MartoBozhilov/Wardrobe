<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head th:replace="~{fragments/head}">
</head>
<body class="animsition">
<header class="v4">
    <div>
        <nav th:replace="~{fragments/navbar}"></nav>
    </div>
</header>


<!-- Product -->
<div class="bg0 m-t-23">
    <div class="container">
        <div class="flex-w flex-sb-m p-b-52">
            <div class="flex-w flex-l-m filter-tope-group m-tb-10">
                <button id="all-products-btn" class="stext-106 cl6 hov1 bor3 trans-04 m-r-32 m-tb-5">
                    All Products
                </button>

                <button class="stext-106 cl6 hov1 bor3 trans-04 m-r-32 m-tb-5" onclick="filterByGender('female')">
                    Women
                </button>

                <button class="stext-106 cl6 hov1 bor3 trans-04 m-r-32 m-tb-5" onclick="filterByGender('male')">
                    Men
                </button>

                <button class="stext-106 cl6 hov1 bor3 trans-04 m-r-32 m-tb-5" onclick="filterBySale()">
                    SALE
                </button>
            </div>


            <div class="flex-w flex-c-m m-tb-10">
                <div class="flex-c-m stext-106 cl6 size-104 bor4 pointer hov-btn3 trans-04 m-r-8 m-tb-4 js-show-filter">
                    <i class="icon-filter cl2 m-r-6 fs-15 trans-04 zmdi zmdi-filter-list"></i>
                    <i class="icon-close-filter cl2 m-r-6 fs-15 trans-04 zmdi zmdi-close dis-none"></i>
                    Filter
                </div>

                <div class="flex-c-m stext-106 cl6 size-105 bor4 pointer hov-btn3 trans-04 m-tb-4 js-show-search">
                    <i class="icon-search cl2 m-r-6 fs-15 trans-04 zmdi zmdi-search"></i>
                    <i class="icon-close-search cl2 m-r-6 fs-15 trans-04 zmdi zmdi-close dis-none"></i>
                    Search
                </div>
            </div>
        </div>
    </div>
    <!-- Search product -->
    <div class="dis-none panel-search w-full p-t-10 p-b-15">
        <div class="bor8 dis-flex p-l-15">
            <button class="size-113 flex-c-m fs-16 cl2 hov-cl1 trans-04">
                <i class="zmdi zmdi-search"></i>
            </button>

            <input class="mtext-107 cl2 size-114 plh2 p-r-15" type="text" name="search-product"
                   placeholder="Search">
        </div>
    </div>

    <!-- Filter -->
    <div class="dis-none panel-filter w-full p-t-10">
        <div class="wrap-filter flex-w bg6 w-full p-lr-40 p-t-27 p-lr-15-sm">
<!--            <div class="filter-col1 p-r-15 p-b-27">-->
<!--                <div class="mtext-102 cl2 p-b-15">-->
<!--                    Sort By-->
<!--                </div>-->

<!--                <ul>-->
<!--                    <li class="p-b-6">-->
<!--                        <a href="#" class="filter-link stext-106 trans-04">-->
<!--                            Default-->
<!--                        </a>-->
<!--                    </li>-->

<!--                    <li class="p-b-6">-->
<!--                        <a href="#" class="filter-link stext-106 trans-04">-->
<!--                            Popularity-->
<!--                        </a>-->
<!--                    </li>-->

<!--                    <li class="p-b-6">-->
<!--                        <a href="#" class="filter-link stext-106 trans-04">-->
<!--                            Average rating-->
<!--                        </a>-->
<!--                    </li>-->

<!--                    <li class="p-b-6">-->
<!--                        <a href="#" class="filter-link stext-106 trans-04 filter-link-active">-->
<!--                            Newness-->
<!--                        </a>-->
<!--                    </li>-->

<!--                    <li class="p-b-6">-->
<!--                        <a href="#" class="filter-link stext-106 trans-04">-->
<!--                            Price: Low to High-->
<!--                        </a>-->
<!--                    </li>-->

<!--                    <li class="p-b-6">-->
<!--                        <a href="#" class="filter-link stext-106 trans-04">-->
<!--                            Price: High to Low-->
<!--                        </a>-->
<!--                    </li>-->
<!--                </ul>-->
<!--            </div>-->

            <div class="filter-col2 p-r-15 p-b-27">
                <div class="mtext-102 cl2 p-b-15">
                    Price
                </div>

                <ul>
                    <li class="p-b-6">
                        <a href="#" onclick="filterByPrice('all')" class="filter-link stext-106 trans-04">All</a>
                    </li>
                    <li class="p-b-6">
                        <a href="#" onclick="filterByPrice('0-50')" class="filter-link stext-106 trans-04">$0.00 - $50.00</a>
                    </li>
                    <li class="p-b-6">
                        <a href="#" onclick="filterByPrice('50-100')" class="filter-link stext-106 trans-04">$50.00 - $100.00</a>
                    </li>
                    <li class="p-b-6">
                        <a href="#" onclick="filterByPrice('100-150')" class="filter-link stext-106 trans-04">$100.00 - $150.00</a>
                    </li>
                    <li class="p-b-6">
                        <a href="#" onclick="filterByPrice('150-200')" class="filter-link stext-106 trans-04">$150.00 - $200.00</a>
                    </li>
                    <li class="p-b-6">
                        <a href="#" onclick="filterByPrice('200+')" class="filter-link stext-106 trans-04">$200.00+</a>
                    </li>
                </ul>
            </div>

            <div class="filter-col4 p-b-27">
                <div class="mtext-102 cl2 p-b-15">
                    Tags
                </div>
                <a href="#" onclick="filterByTag('all')"
                   class="flex-c-m stext-107 cl6 size-301 bor7 p-lr-15 hov-tag1 trans-04 m-r-5 m-b-5">
                    All Tags
                </a>
                <a href="#" onclick="filterByTag('casual')"
                   class="flex-c-m stext-107 cl6 size-301 bor7 p-lr-15 hov-tag1 trans-04 m-r-5 m-b-5">
                    Casual fit
                </a>
                <a href="#" onclick="filterByTag('official')"
                   class="flex-c-m stext-107 cl6 size-301 bor7 p-lr-15 hov-tag1 trans-04 m-r-5 m-b-5">
                    Official
                </a>
                <a href="#" onclick="filterByTag('oversize')"
                   class="flex-c-m stext-107 cl6 size-301 bor7 p-lr-15 hov-tag1 trans-04 m-r-5 m-b-5">
                    Oversize
                </a>
            </div>
        </div>
    </div>
</div>


<!-- Product -->
<div class="container">
    <div class="row">
        <!-- Start of the Thymeleaf loop for each product -->
        <!--					 trqbva da se napravi da moje da se vzima taga na produkta, za 256 red - " -->
        <div th:each="product : ${products}"
             th:data-gender="${product.tag.gender}"
             th:data-tag="${product.tag.style}"
             th:data-price="${product.price}"
             th:data-on-sale="${product.discount}"
             class="col-md-4 col-sm-6 mb-4 product">
            <div class="block2 h-100">
                <div class="block2-pic hov-img0">
                    <!-- If no image URL, show placeholder -->
                    <div th:if="${product.imgUrl == null}" class="product-image-placeholder">No Image
                        Available
                    </div>
                    <!-- If image URL exists, wrap the image with an anchor tag -->
                    <a th:if="${product.imgUrl != null}"
                       th:href="@{'/shop/product-detail/' + ${product.productNumber}}">
                        <img th:src="@{${product.imgUrl}}" class="product-image" alt="Product Image">
                    </a>
                </div>

                <div class="block2-txt flex-w flex-t p-t-14">
                    <div class="block2-txt-child1 flex-col-l">
                        <!-- Product name -->
                        <div th:text="${product.name}" class="stext-104 cl4 hov-cl1 trans-04 js-name-b2 p-b-6">
                            Product Name
                        </div>

                        <!-- Product price -->
                        <span class="stext-105 cl3" th:text="'$' + ${product.price}">
                            $0.00
                        </span>
                    </div>
                </div>
            </div>
        </div>
        <!-- End of the Thymeleaf loop for each product -->
    </div>
</div>

<!-- Dynamic Products End -->

<!-- Footer -->
<div>
    <footer th:replace="~{fragments/footer}"></footer>
</div>
<!-- Modal1 -->
<!--        <div class="wrap-modal1 js-modal1 p-t-60 p-b-20">-->
<!--            <div class="overlay-modal1 js-hide-modal1"></div>-->

<!--            <div class="container">-->
<!--                <div class="bg0 p-t-60 p-b-30 p-lr-15-lg how-pos3-parent">-->
<!--                    <button class="how-pos3 hov3 trans-04 js-hide-modal1">-->
<!--                        <img src="images/icons/icon-close.png" alt="CLOSE">-->
<!--                    </button>-->

<!--                    <div class="row">-->
<!--                        <div class="col-md-6 col-lg-7 p-b-30">-->
<!--                            <div class="p-l-25 p-r-30 p-lr-0-lg">-->
<!--                                <div class="wrap-slick3 flex-sb flex-w">-->
<!--                                    <div class="wrap-slick3-dots"></div>-->
<!--                                    <div class="wrap-slick3-arrows flex-sb-m flex-w"></div>-->

<!--                                    <div class="slick3 gallery-lb">-->
<!--                                        <div class="item-slick3" data-thumb="images/product-detail-01.jpg">-->
<!--                                            <div class="wrap-pic-w pos-relative">-->
<!--                                                <img src="images/product-detail-01.jpg" alt="IMG-PRODUCT">-->

<!--                                                <a class="flex-c-m size-108 how-pos1 bor0 fs-16 cl10 bg0 hov-btn3 trans-04"-->
<!--                                                   href="images/product-detail-01.jpg">-->
<!--                                                    <i class="fa fa-expand"></i>-->
<!--                                                </a>-->
<!--                                            </div>-->
<!--                                        </div>-->

<!--                                        <div class="item-slick3" data-thumb="images/product-detail-02.jpg">-->
<!--                                            <div class="wrap-pic-w pos-relative">-->
<!--                                                <img src="images/product-detail-02.jpg" alt="IMG-PRODUCT">-->

<!--                                                <a class="flex-c-m size-108 how-pos1 bor0 fs-16 cl10 bg0 hov-btn3 trans-04"-->
<!--                                                   href="images/product-detail-02.jpg">-->
<!--                                                    <i class="fa fa-expand"></i>-->
<!--                                                </a>-->
<!--                                            </div>-->
<!--                                        </div>-->

<!--                                        <div class="item-slick3" data-thumb="images/product-detail-03.jpg">-->
<!--                                            <div class="wrap-pic-w pos-relative">-->
<!--                                                <img src="images/product-detail-03.jpg" alt="IMG-PRODUCT">-->

<!--                                                <a class="flex-c-m size-108 how-pos1 bor0 fs-16 cl10 bg0 hov-btn3 trans-04"-->
<!--                                                   href="images/product-detail-03.jpg">-->
<!--                                                    <i class="fa fa-expand"></i>-->
<!--                                                </a>-->
<!--                                            </div>-->
<!--                                        </div>-->
<!--                                    </div>-->
<!--                                </div>-->
<!--                            </div>-->
<!--                        </div>-->

<!--                        <div class="col-md-6 col-lg-5 p-b-30">-->
<!--                            <div class="p-r-50 p-t-5 p-lr-0-lg">-->
<!--                                <h4 class="mtext-105 cl2 js-name-detail p-b-14">-->
<!--                                    Lightweight Jacket-->
<!--                                </h4>-->

<!--                                <span class="mtext-106 cl2">-->
<!--								$58.79-->
<!--							</span>-->

<!--                                <p class="stext-102 cl3 p-t-23">-->
<!--                                    Nulla eget sem vitae eros pharetra viverra. Nam vitae luctus ligula. Mauris-->
<!--                                    consequat ornare feugiat.-->
<!--                                </p>-->

<!--                                &lt;!&ndash;  &ndash;&gt;-->
<!--                                <div class="p-t-33">-->
<!--                                    <div class="flex-w flex-r-m p-b-10">-->
<!--                                        <div class="size-203 flex-c-m respon6">-->
<!--                                            Size-->
<!--                                        </div>-->

<!--                                        <div class="size-204 respon6-next">-->
<!--                                            <div class="rs1-select2 bor8 bg0">-->
<!--                                                <select class="js-select2" name="time">-->
<!--                                                    <option>Choose an option</option>-->
<!--                                                    <option>Size S</option>-->
<!--                                                    <option>Size M</option>-->
<!--                                                    <option>Size L</option>-->
<!--                                                    <option>Size XL</option>-->
<!--                                                </select>-->
<!--                                                <div class="dropDownSelect2"></div>-->
<!--                                            </div>-->
<!--                                        </div>-->
<!--                                    </div>-->

<!--                                    <div class="flex-w flex-r-m p-b-10">-->
<!--                                        <div class="size-203 flex-c-m respon6">-->
<!--                                            Color-->
<!--                                        </div>-->

<!--                                        <div class="size-204 respon6-next">-->
<!--                                            <div class="rs1-select2 bor8 bg0">-->
<!--                                                <select class="js-select2" name="time">-->
<!--                                                    <option>Choose an option</option>-->
<!--                                                    <option>Red</option>-->
<!--                                                    <option>Blue</option>-->
<!--                                                    <option>White</option>-->
<!--                                                    <option>Grey</option>-->
<!--                                                </select>-->
<!--                                                <div class="dropDownSelect2"></div>-->
<!--                                            </div>-->
<!--                                        </div>-->
<!--                                    </div>-->

<!--                                    <div class="flex-w flex-r-m p-b-10">-->
<!--                                        <div class="size-204 flex-w flex-m respon6-next">-->
<!--                                            <div class="wrap-num-product flex-w m-r-20 m-tb-10">-->
<!--                                                <div class="btn-num-product-down cl8 hov-btn3 trans-04 flex-c-m">-->
<!--                                                    <i class="fs-16 zmdi zmdi-minus"></i>-->
<!--                                                </div>-->

<!--                                                <input class="mtext-104 cl3 txt-center num-product" type="number"-->
<!--                                                       name="num-product" value="1">-->

<!--                                                <div class="btn-num-product-up cl8 hov-btn3 trans-04 flex-c-m">-->
<!--                                                    <i class="fs-16 zmdi zmdi-plus"></i>-->
<!--                                                </div>-->
<!--                                            </div>-->

<!--                                            <button class="flex-c-m stext-101 cl0 size-101 bg1 bor1 hov-btn1 p-lr-15 trans-04 js-addcart-detail">-->
<!--                                                Add to cart-->
<!--                                            </button>-->
<!--                                        </div>-->
<!--                                    </div>-->
<!--                                </div>-->

<!--                                &lt;!&ndash;  &ndash;&gt;-->
<!--                                <div class="flex-w flex-m p-l-100 p-t-40 respon7">-->
<!--                                    <div class="flex-m bor9 p-r-10 m-r-11">-->
<!--                                        <a href="#"-->
<!--                                           class="fs-14 cl3 hov-cl1 trans-04 lh-10 p-lr-5 p-tb-2 js-addwish-detail tooltip100"-->
<!--                                           data-tooltip="Add to Wishlist">-->
<!--                                            <i class="zmdi zmdi-favorite"></i>-->
<!--                                        </a>-->
<!--                                    </div>-->

<!--                                    <a href="#" class="fs-14 cl3 hov-cl1 trans-04 lh-10 p-lr-5 p-tb-2 m-r-8 tooltip100"-->
<!--                                       data-tooltip="Facebook">-->
<!--                                        <i class="fa fa-facebook"></i>-->
<!--                                    </a>-->

<!--                                    <a href="#" class="fs-14 cl3 hov-cl1 trans-04 lh-10 p-lr-5 p-tb-2 m-r-8 tooltip100"-->
<!--                                       data-tooltip="Twitter">-->
<!--                                        <i class="fa fa-twitter"></i>-->
<!--                                    </a>-->

<!--                                    <a href="#" class="fs-14 cl3 hov-cl1 trans-04 lh-10 p-lr-5 p-tb-2 m-r-8 tooltip100"-->
<!--                                       data-tooltip="Google Plus">-->
<!--                                        <i class="fa fa-google-plus"></i>-->
<!--                                    </a>-->
<!--                                </div>-->
<!--                            </div>-->
<!--                        </div>-->
<!--                    </div>-->
<!--                </div>-->
<!--            </div>-->
<!--        </div>-->

<div th:replace="~{fragments/scripts}"></div>
<script>
// Global filter states
let currentGender = 'all';
let currentTag = 'all';
let currentPriceRange = 'all';
let onSale = false;  // Tracks whether the sale filter is active

// Filter products based on current filter states
function filterProducts() {
    const products = document.querySelectorAll('.product');
    products.forEach(product => {
        const productGender = product.getAttribute('data-gender').toLowerCase();
        const productTag = product.getAttribute('data-tag').toLowerCase();
        const productPrice = parseFloat(product.getAttribute('data-price'));
        const isProductOnSale = product.getAttribute('data-on-sale') === 'true';

        // Check if each product matches the current filter criteria
        const genderMatches = currentGender === 'all' || productGender === currentGender;
        const tagMatches = currentTag === 'all' || productTag === currentTag;
        const priceMatches = checkPriceRange(productPrice, currentPriceRange);
        const saleMatches = !onSale || isProductOnSale;

        product.style.display = (genderMatches && tagMatches && priceMatches && saleMatches) ? '' : 'none';
    });
}

// Toggle the sale filter on and off
function filterBySale() {
    onSale = !onSale;
    filterProducts();
}

// Update products based on selected gender
function filterByGender(gender) {
    currentGender = gender;
    filterProducts();
}

// Update products based on selected tag
function filterByTag(tag) {
    currentTag = tag;
    filterProducts();
}

// Update products based on selected price range
function filterByPrice(range) {
    currentPriceRange = range;
    filterProducts();
}

// Check if a product's price falls within the selected price range
function checkPriceRange(price, range) {
    switch (range) {
        case '0-50': return price >= 0 && price <= 50;
        case '50-100': return price > 50 && price <= 100;
        case '100-150': return price > 100 && price <= 150;
        case '150-200': return price > 150 && price <= 200;
        case '200+': return price > 200;
        case 'all': return true;
    }
}

// Utility function to parse URL query parameters
function getQueryParam(param) {
    const params = new URLSearchParams(window.location.search);
    return params.get(param);
}

// Reset all filters to their default states
function resetAllFilters() {
    currentGender = 'all';
    currentTag = 'all';
    currentPriceRange = 'all';
    onSale = false;
    filterProducts();
}

// Initialize filters based on URL parameters when the page loads
document.addEventListener("DOMContentLoaded", function() {
    const gender = getQueryParam('gender');
    if (gender) {
        filterByGender(decodeURIComponent(gender));
    }
    // Optionally, reset all filters when clicking the "All Products" button
    document.querySelector('#all-products-btn').addEventListener('click', resetAllFilters);
});


            <!--script that clears the url-->
<!--            document.addEventListener("DOMContentLoaded", function() {-->
<!--                function getQueryParam(param) {-->
<!--                    var search = window.location.search.substring(1);-->
<!--                    var vars = search.split('&');-->
<!--                    for (var i = 0; i < vars.length; i++) {-->
<!--                        var pair = vars[i].split('=');-->
<!--                        if (pair[0] == param) {-->
<!--                            return pair[1];-->
<!--                        }-->
<!--                    }-->
<!--                    return false;-->
<!--                }-->
<!--                var gender = getQueryParam('gender');-->
<!--                if (gender) {-->
<!--                    gender = decodeURIComponent(gender);-->
<!--                    filterByGender(gender);-->

<!--                    // Clear URL parameters-->
<!--                    window.history.pushState({}, document.title, window.location.pathname);-->
<!--                }-->
<!--            });-->

</script>
</body>
</html>